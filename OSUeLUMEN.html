<b widgetparameters="StyleSheet*WidTypSep*V2lkZ2V0SUQqUGFyTmFtVmFsU2VwKjU5YTNiM2Y1YTQyNjQ4MDhhZjgwNDQwYzMzOWE3YjJkKlBhclNlcCpTdHlsZVNoZWV0SW5mb19TZXF1ZW5jZSpQYXJOYW1WYWxTZXAqNipQYXJTZXAqU3R5bGVTaGVldEluZm9fU2hlZXRQYXRoTmFtZSpQYXJOYW1WYWxTZXAqYm9vdHN0cmFwLm1pbi5jc3MqUGFyU2VwKlN0eWxlU2hlZXRJbmZvX0Fic29sdXRlUGF0aCpQYXJOYW1WYWxTZXAqRmFsc2UqUGFyU2VwKg==" id="PubWidget_StyleSheet_59a3b3f5a4264808af80440c339a7b2d_1" style="border:1px dashed grey" disabled="disabled"><i>HTML STYLESHEET - bootstrap.min.css</i></b> <b widgetparameters="StyleSheet*WidTypSep*V2lkZ2V0SUQqUGFyTmFtVmFsU2VwKmYzZmRmNzY2MzZjYzRjOWQ5NTgxMzVkYmE5MTI4ZTJkKlBhclNlcCpTdHlsZVNoZWV0SW5mb19TZXF1ZW5jZSpQYXJOYW1WYWxTZXAqNypQYXJTZXAqU3R5bGVTaGVldEluZm9fU2hlZXRQYXRoTmFtZSpQYXJOYW1WYWxTZXAqYm9vdHN0cmFwdGhlbWUubWluLmNzcypQYXJTZXAqU3R5bGVTaGVldEluZm9fQWJzb2x1dGVQYXRoKlBhck5hbVZhbFNlcCpGYWxzZSpQYXJTZXAq" id="PubWidget_StyleSheet_f3fdf76636cc4c9d958135dba9128e2d_1" style="border:1px dashed grey" disabled="disabled"><i>HTML STYLESHEET - bootstraptheme.min.css</i></b>
<br /> <b widgetparameters="StyleSheet*WidTypSep*V2lkZ2V0SUQqUGFyTmFtVmFsU2VwKjU0MmZkNDA4NGVjYjQxNmZhZWQ3Zjc2ODdmNDMzYjc3KlBhclNlcCpTdHlsZVNoZWV0SW5mb19TZXF1ZW5jZSpQYXJOYW1WYWxTZXAqMypQYXJTZXAqU3R5bGVTaGVldEluZm9fU2hlZXRQYXRoTmFtZSpQYXJOYW1WYWxTZXAqZUx1bWVuU3R5bGUuY3NzKlBhclNlcCpTdHlsZVNoZWV0SW5mb19BYnNvbHV0ZVBhdGgqUGFyTmFtVmFsU2VwKkZhbHNlKlBhclNlcCo=" id="PubWidget_StyleSheet_542fd4084ecb416faed7f7687f433b77_1" style="border:1px dashed grey" disabled="disabled"><i>HTML STYLESHEET - eLumenStyle.css</i></b> <b widgetparameters="StyleSheet*WidTypSep*V2lkZ2V0SUQqUGFyTmFtVmFsU2VwKjI4YWFiZGM1OTQxOTQxOTI5OWU0YjM4OGI1ZGI2ZWFmKlBhclNlcCpTdHlsZVNoZWV0SW5mb19TZXF1ZW5jZSpQYXJOYW1WYWxTZXAqMTAqUGFyU2VwKlN0eWxlU2hlZXRJbmZvX1NoZWV0UGF0aE5hbWUqUGFyTmFtVmFsU2VwKmtlbmRvLmNvbW1vbi5taW4uY3NzKlBhclNlcCpTdHlsZVNoZWV0SW5mb19BYnNvbHV0ZVBhdGgqUGFyTmFtVmFsU2VwKkZhbHNlKlBhclNlcCo=" id="PubWidget_StyleSheet_28aabdc59419419299e4b388b5db6eaf_1" style="border:1px dashed grey" disabled="disabled"><i>HTML STYLESHEET - kendo.common.min.css</i></b> <b widgetparameters="StyleSheet*WidTypSep*V2lkZ2V0SUQqUGFyTmFtVmFsU2VwKmI0YzE1ODIwYjZkNjQ3N2JiNDYyMzI2OGFjYmZmNzdlKlBhclNlcCpTdHlsZVNoZWV0SW5mb19TZXF1ZW5jZSpQYXJOYW1WYWxTZXAqMjEqUGFyU2VwKlN0eWxlU2hlZXRJbmZvX1NoZWV0UGF0aE5hbWUqUGFyTmFtVmFsU2VwKmtlbmRvLmRlZmF1bHQubWluLmNzcypQYXJTZXAqU3R5bGVTaGVldEluZm9fQWJzb2x1dGVQYXRoKlBhck5hbVZhbFNlcCpGYWxzZSpQYXJTZXAq" id="PubWidget_StyleSheet_b4c15820b6d6477bb4623268acbff77e_1" style="border:1px dashed grey" disabled="disabled"><i>HTML STYLESHEET - kendo.default.min.css</i></b> <b widgetparameters="StyleSheet*WidTypSep*V2lkZ2V0SUQqUGFyTmFtVmFsU2VwKjUyOWQ3ODFiMzM2NDRiYThhYTY4OGQ2ZTdhMDRmNTJlKlBhclNlcCpTdHlsZVNoZWV0SW5mb19TZXF1ZW5jZSpQYXJOYW1WYWxTZXAqMTIqUGFyU2VwKlN0eWxlU2hlZXRJbmZvX1NoZWV0UGF0aE5hbWUqUGFyTmFtVmFsU2VwKmtlbmRvLmRhdGF2aXoubWluLmNzcypQYXJTZXAqU3R5bGVTaGVldEluZm9fQWJzb2x1dGVQYXRoKlBhck5hbVZhbFNlcCpGYWxzZSpQYXJTZXAq" id="PubWidget_StyleSheet_529d781b33644ba8aa688d6e7a04f52e_1" style="border:1px dashed grey" disabled="disabled"><i>HTML STYLESHEET - kendo.dataviz.min.css</i></b> <b widgetparameters="StyleSheet*WidTypSep*V2lkZ2V0SUQqUGFyTmFtVmFsU2VwKjI0Njc4ZTJmNTBlZDQ4ZGViNzQ1MDgwYmQ0ZDE3MTRkKlBhclNlcCpTdHlsZVNoZWV0SW5mb19TZXF1ZW5jZSpQYXJOYW1WYWxTZXAqMTEqUGFyU2VwKlN0eWxlU2hlZXRJbmZvX1NoZWV0UGF0aE5hbWUqUGFyTmFtVmFsU2VwKmtlbmRvLmRhdGF2aXouZGVmYXVsdC5taW4uY3NzKlBhclNlcCpTdHlsZVNoZWV0SW5mb19BYnNvbHV0ZVBhdGgqUGFyTmFtVmFsU2VwKkZhbHNlKlBhclNlcCo=" id="PubWidget_StyleSheet_24678e2f50ed48deb745080bd4d1714d_1" style="border:1px dashed grey" disabled="disabled"><i>HTML STYLESHEET - kendo.dataviz.default.min.css</i></b>
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// or with CDN hosted bootstrap -->
<!--[if lt IE 9]>
<script src="../../../../../js/html5shiv.js"></script><script src="../../../../../js/respond.min.js"></script><![endif]-->
<script src="../../../../../js/jquery-1.10.2.min.js"></script>
<script src="../../../../../js/bootstrap.min.js"></script>
<script src="../../../../../js/kendo.all.min.js"></script>
<!-- begin html -->
<div id="eLumen">
    <div class="navbar navbar-default navbar-fixed-top headerPadding" id="header">
        <!-- 3 containers to get the alignment for the patient header correct -->
        <div class="container">
            <div class="container">
                <div class="container">
                    <div class="nav-global">
                        <div class="row">
                            <!-- PHI Patient Header and Save button -->
                            <div class="row col-md-6 col-sm-6 col-xs-6" id="PHIHeader">
                                <div class="panel panel-default">
                                    <div class="PatientLabel BoldText"> &nbsp;&nbsp;<span id="Last"></span>,&nbsp; <span id="First"></span>&nbsp; <span id="MI"></span>
                                        <br /> &nbsp;&nbsp;DOB:&nbsp;&nbsp;<span id="DOB"></span>&nbsp;&nbsp;&nbsp;<span id="Age"></span>
                                        <br /> &nbsp;&nbsp;MRN:&nbsp;&nbsp;<span id="MRN"></span> </div>
                                </div>
                            </div>
                            <!-- Proceed PCI button -->
                            <div class="row col-md-4 col-sm-4 col-xs-4">
                                <div class="pull-right">
                                    <button class="btn btn-HOS btn-xl" id="ProceedPCI" type="button"> <span class="glyphicon glyphicon-play-circle"></span>&nbsp;&nbsp;Calculate Algorithm </button>
                                </div>
                            </div>
                            <!-- Save button -->
                            <div class="row col-md-2 col-sm-2 col-xs-2">
                                <div class="pull-right">
                                    <button class="btn btn-default btn-xl disabled" id="eLUMENSave" type="button"> <span class="glyphicon glyphicon-upload"></span>&nbsp;&nbsp;Save&nbsp; </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- begin display - below Patient label -->
    <div class="row">
        <!-- begin of left side -->
        <div class="container" id="body">
            <section class="col-md-6 col-sm-12 col-xs-12" id="LeftSide">
                <!-- Lab Values -->
                <div class="panel-group">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <div class="panel-title BoldText eLumenBody">
                                <button class="btn btn-sm" type="button" data-toggle="collapse" data-target="#LabValDiv"> <span class="glyphicon glyphicon-chevron-down"></span> </button> Lab Values <span class="pull-right">Date / Time</span> </div>
                        </div>
                        <div class="panel-collapse collapse in" id="LabValDiv">
                            <div class="panel-body eLumenBody">
                                <table class="table table-condensed table-responsive table-hover" id="LabValues"> </table>
                            </div>
                        </div>
                    </div>
                </div>
                <br />
                <!-- AUC Models -->
                <div id="AUCModels">
                    <div class="hidden" id="AUCSAAsymp">
                        <div class="panel-group">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <div class="panel-title BoldText eLumenBody">
                                        <button class="btn btn-sm" type="button" data-toggle="collapse" data-target="#AUCSAAsympResults"> <span class="glyphicon glyphicon-chevron-down"></span> </button> AUC Stable Angina/Asymptomatic <span class="pull-right" id="AUCSAAsympDateTime">Date / Time</span> </div>
                                </div>
                                <div class="panel-collapse collapse in" id="AUCSAAsympResults">
                                    <div class="panel-body eLumenBody">
                                        <!-- AUC results -->
                                        <div class="col-md-offset-0">
                                            <table class="table table-condensed table-responsive table-hover" id="AUCSAAsympTable"> </table> AUC Notes&nbsp;
                                            <input class="form-control eLumenValueCapture" id="AUCNotes" type="text" placeholder="AUC Notes" value="" /> </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br /> </div>
                    <div class="hidden" id="AUCUANonSTEMI">
                        <div class="panel-group">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <div class="panel-title BoldText eLumenBody">
                                        <button class="btn btn-sm" type="button" data-toggle="collapse" data-target="#AUCUANonSTEMIResults"> <span class="glyphicon glyphicon-chevron-down"></span> </button> AUC Unstable Angina/Non-STEMI <span class="pull-right" id="AUCUANonSTEMIDateTime">Date / Time</span> </div>
                                </div>
                                <div class="panel-collapse collapse in" id="AUCUANonSTEMIResults">
                                    <div class="panel-body eLumenBody">
                                        <!-- AUC results -->
                                        <div class="col-md-offset-0">
                                            <table class="table table-condensed table-responsive table-hover" id="AUCUANonSTEMITable"> </table> AUC Notes&nbsp;
                                            <input class="form-control eLumenValueCapture" id="AUCNotes" type="text" placeholder="AUC Notes" value="" /> </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br /> </div>
                    <div class="hidden" id="AUCSTEMI">
                        <div class="panel-group">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <div class="panel-title BoldText eLumenBody">
                                        <button class="btn btn-sm" type="button" data-toggle="collapse" data-target="#AUCSTEMIResults"> <span class="glyphicon glyphicon-chevron-down"></span> </button> AUC STEMI <span class="pull-right" id="AUCSTEMIDateTime">Date / Time</span> </div>
                                </div>
                                <div class="panel-collapse collapse in" id="AUCSTEMIResults">
                                    <div class="panel-body eLumenBody">
                                        <!-- AUC results -->
                                        <div class="col-md-offset-0">
                                            <table class="table table-condensed table-responsive table-hover" id="AUCSTEMITable"> </table> AUC Notes&nbsp;
                                            <input class="form-control eLumenValueCapture" id="AUCNotes" type="text" placeholder="AUC Notes" value="" /> </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br /> </div>
                </div>
                <!-- end AUC -->
            </section>
            <!-- begin of right side -->
            <section class="col-md-6 col-sm-12 col-xs-12" id="RightSide">
                <!-- AKI Model begin
<div class="panel-group">
<div class="panel panel-default">
<div class="panel-heading">
<div class="panel-title BoldText eLumenBody">
<button class="btn btn-sm" type="button" data-toggle="collapse" data-target="#AKIModel">
<span class="glyphicon glyphicon-chevron-down"></span>
</button> Acute Kidney Injury <span class="pull-right" id="AKIModelDateTime">Date / Time</span>
</div>
</div>
<div class="panel-collapse collapse in" id="AKIModel">
<div class="panel-body eLumenBody">
<div class="col-md-offset-0">
<div class="k-content">
<div id="AKIRiskChart"></div>
</div>
</div>
</div>
</div>
</div>
</div>
<br />
AKI Model end-->
                <!-- Bleeding Model begin -->
                <div class="panel-group">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <div class="panel-title BoldText eLumenBody">
                                <button class="btn btn-sm" type="button" data-toggle="collapse" data-target="#BleedingModel"> <span class="glyphicon glyphicon-chevron-down"></span> </button> PCI Bleeding <span class="pull-right" id="BleedingModelDateTime">Date / Time</span> </div>
                        </div>
                        <div class="panel-collapse collapse in" id="BleedingModel">
                            <div class="panel-body eLumenBody">
                                <!-- bleeding results -->
                                <div class="col-md-offset-3" id="BleedingDiv"> <span>Risk / Class</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="BoldText" id="BleedingRisk"></span>&nbsp;&nbsp;/&nbsp;&nbsp;<span class="BoldText" id="BleedingRiskClass"></span> </div>
                            </div>
                        </div>
                    </div>
                </div>
                <br />
                <!-- Bleeding Model end -->
                <!-- Mortality Model begin -->
                <div class="panel-group">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <div class="panel-title BoldText eLumenBody">
                                <button class="btn btn-sm" type="button" data-toggle="collapse" data-target="#MortalityModel"> <span class="glyphicon glyphicon-chevron-down"></span> </button> PCI Mortality <span class="pull-right" id="MortalityModelDateTime">Date / Time</span> </div>
                        </div>
                        <div class="panel-collapse collapse in" id="MortalityModel">
                            <div class="panel-body eLumenBody">
                                <!-- bleeding results -->
                                <div class="col-md-offset-3" id="MortalityDiv"> <span>Risk</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="BoldText" id="MortalityRisk"></span> </div>
                                <div style="height: 20px;">&nbsp;</div>
                                <div class="hidden col-md-offset-0" id="MortalityPathwayMessageDiv">
                                    <div style="padding: 10px; border-radius: 10px; border: 2px solid #d4d1d1; border-image: none; text-align: center; font-weight: bold;"> <span id="MortalityPathwayMessage"></span> </div>
                                </div>
                                <div class="col-md-offset-0" id="ConsultAndSyntax" style="text-align: center;">
                                    <div style="height: 20px;">&nbsp;</div>
                                    <button class="btn btn-default disabled"> <span id="ConsultAndSyntaxMessage" style="font-size: x-small; font-weight: bold;">
HEART TEAM MEMBERS<br />
2 Interventionalists <br />
1 OHS Physician <br />
Primary Attending/Cardiologist (if available)
</span> </button> &nbsp;&nbsp;
                                    <button class="btn btn-default disabled"> <span id="ConsultAndSyntaxMessage" style="font-size: x-small; font-weight: bold;">
SYNTAX SCORE<br />
Calculate post diagnostic <br />
caths for all patients with <br />
<b>Triple Vessel or Left Main Disease</b>
</span> </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <br />
                <!-- Mortality Model end -->
                <!-- TVR Model begin -->
                <div class="panel-group">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <div class="panel-title BoldText eLumenBody">
                                <button class="btn btn-sm" type="button" data-toggle="collapse" data-target="#TVRModel"> <span class="glyphicon glyphicon-chevron-down"></span> </button> Restenosis <span class="pull-right" id="TVRDateTime">Date / Time</span> </div>
                        </div>
                        <div class="panel-collapse collapse in" id="TVRModel">
                            <div class="panel-body eLumenBody">
                                <!-- tvr results -->
                                <div class="col-md-offset-0">
                                    <div class="k-content">
                                        <div id="TVRRiskChart"></div>
                                    </div>
                                    <div style="height: 20px;">&nbsp;</div>
                                    <div id="TVRDetailToggle" style="text-align: center; font-weight: bold; cursor: pointer;">
                                        <button class="btn btn-default disabled">Click to Show/Hide TVR Detail</button>
                                    </div>
                                    <!-- TVRRisks is a special class that will be loaded with the TVR value based on the id of the element in the class -->
                                    <div class="hidden" id="TVRDetailedTable">
                                        <div style="height: 35px;">&nbsp;</div>
                                        <table class="table table-striped table-condensed table-hover">
                                            <thead class="BoldText">
                                                <tr>
                                                    <td>Vessel Diameter</td>
                                                    <td>Lesion Length</td>
                                                    <td align="right">BMS %</td>
                                                    <td align="right">DES %</td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>&lt; 3mm </td>
                                                    <td>&lt; 30 mm </td>
                                                    <td>
                                                        <div class="TVRRisks" id="Rest_MDACBMSDiLT3LnLT30Ph"></div>
                                                    </td>
                                                    <td>
                                                        <div class="TVRRisks" id="Rest_MDACDESDiLT3LnLT30Ph"></div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>&lt; 3mm </td>
                                                    <td>&#8805; 30 mm </td>
                                                    <td>
                                                        <div class="TVRRisks" id="Rest_MDACBMSDiLT3LnGE30Ph"></div>
                                                    </td>
                                                    <td>
                                                        <div class="TVRRisks" id="Rest_MDACDESDiLT3LnGE30Ph"></div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>&#8805; 3mm </td>
                                                    <td>&lt; 30 mm </td>
                                                    <td>
                                                        <div class="TVRRisks" id="Rest_MDACBMSDiGE3LnLT30Ph"></div>
                                                    </td>
                                                    <td>
                                                        <div class="TVRRisks" id="Rest_MDACDESDiGE3LnLT30Ph"></div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>&#8805; 3mm </td>
                                                    <td>&#8805; 30 mm </td>
                                                    <td>
                                                        <div class="TVRRisks" id="Rest_MDACBMSDiGE3LnGE30Ph"> </div>
                                                    </td>
                                                    <td>
                                                        <div class="TVRRisks" id="Rest_MDACDESDiGE3LnGE30Ph"></div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <br />
                <!-- TVR Model end -->
                <!-- show all input values ePRISM widget begin -->
                <div class="panel-group">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <div class="panel-title BoldText eLumenBody">
                                <button class="btn btn-sm" type="button" data-toggle="collapse" data-target="#AllInputDiv"> <span class="glyphicon glyphicon-chevron-down"></span> </button> Input Values </div>
                        </div>
                        <div class="panel-collapse collapse out" id="AllInputDiv">
                            <div class="panel-body eLumenBody"> </div>
                            <div class="eLumenBody" style="align-content: center;"> <span widgetparameters="PatientData*WidTypSep*V2lkZ2V0SUQqUGFyTmFtVmFsU2VwKjliYjIwZTA3MmJlZTQ4Y2JhN2VlODY5NWU5MjRiNGE1KlBhclNlcCpEZWNpbWFsc1RvRGlzcGxheSpQYXJOYW1WYWxTZXAqMSpQYXJTZXAqRGlzcGxheUJvb2xlYW4qUGFyTmFtVmFsU2VwKkRpc3BsYXlUcnVlRmFsc2UqUGFyU2VwKkRpc3BsYXlEYXRlVGltZSpQYXJOYW1WYWxTZXAqRGlzcGxheURhdGVUaW1lKlBhclNlcCpEaXNwbGF5TGFiZWwqUGFyTmFtVmFsU2VwKkRpc3BsYXlGcmllbmRseU5hbWUqUGFyU2VwKkRpc3BsYXlNb2RlbE91dHB1dCpQYXJOYW1WYWxTZXAqTm9uZSpQYXJTZXAqRGlzcGxheU5vbWluYWwqUGFyTmFtVmFsU2VwKkRpc3BsYXlDb25kZW5zZWRUZXh0TGFiZWwqUGFyU2VwKkRpc3BsYXlWYWx1ZSpQYXJOYW1WYWxTZXAqVHJ1ZSpQYXJTZXAqTGFiZWxTZXBhcmF0b3IqUGFyTmFtVmFsU2VwKipQYXJTZXAqUGFyYW1ldGVyTmFtZSpQYXJOYW1WYWxTZXAqLTEqUGFyU2VwKlNjb3BlKlBhck5hbVZhbFNlcCpEb2N1bWVudCpQYXJTZXAqVHlwZU9mUGF0aWVudERhdGEqUGFyTmFtVmFsU2VwKkRhdGFTZXQqUGFyU2VwKlRhYmxlQ2xhc3MqUGFyTmFtVmFsU2VwKnRhYmxlIHRhYmxlLWNvbmRlbnNlZCB0YWJsZS1ob3ZlcipQYXJTZXAqTnVsbFZhbHVlU3RyaW5nKlBhck5hbVZhbFNlcCpudWxsIHZhbHVlKlBhclNlcCpIaWRlTnVsbERhdGEqUGFyTmFtVmFsU2VwKlRydWUqUGFyU2VwKlBhcmFtQ291bnQqUGFyTmFtVmFsU2VwKjAqUGFyU2VwKlBhcmFtMCpQYXJOYW1WYWxTZXAqU2Vjb25kR2VuZXJhdGlvbkRFUypQYXJTZXAqRGlzcGxheVRoZVNlbGVjdGVkUGFyYW1ldGVycypQYXJOYW1WYWxTZXAqRmFsc2UqUGFyU2VwKlNob3dEYXRlQ29sbGVjdGVkKlBhck5hbVZhbFNlcCpGYWxzZSpQYXJTZXAq" id="PubWidget_PatientData_9bb20e072bee48cba7ee8695e924b4a5_1" style="border:1px dashed grey" title="Data Set" disabled="disabled">
<table class="table table-condensed table-hover">
     <tbody>
         <tr>
             <th>Parameter</th> <th>Value</th>
         </tr>
         <tr>
             <td class="LeftColumn">Age (Auto-Calculated)</td>
             <td>34.2</td>
         </tr>
         <tr>
             <td class="LeftColumn">Gender</td>
             <td>Male</td>
         </tr>
         <tr>
             <td class="LeftColumn">Race (7 Ethnic Groups)</td>
             <td>Asian</td>
         </tr>
         <tr>
             <td class="LeftColumn">Weight (Pounds)</td>
             <td>284.8</td>
         </tr>
         <tr>
             <td class="LeftColumn">Height (US)</td>
             <td>42.7</td>
         </tr>
         <tr>
             <td class="LeftColumn">Hemoglobin (g/dL)</td>
             <td>9.3</td>
         </tr>
         <tr>
             <td class="LeftColumn">GFR AA</td>
             <td>28.5</td>
         </tr>
         <tr>
             <td class="LeftColumn">GFR Non-AA</td>
             <td>28.5</td>
         </tr>
         <tr>
             <td class="LeftColumn">Low HDL</td>
             <td>Yes</td>
         </tr>
         <tr>
             <td class="LeftColumn">Positive Cardiac Enzymes</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">Serum Creatinine (mg/dL)</td>
             <td>44.8</td>
         </tr>
         <tr>
             <td class="LeftColumn">LV Ejection Fraction</td>
             <td>44.8</td>
         </tr>
         <tr>
             <td class="LeftColumn">ST Segment Change Greater Than .5 mm</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">Stress Test Results</td>
             <td>Not Spec</td>
         </tr>
         <tr>
             <td class="LeftColumn">Angina HF or hemodynamic instability any of</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">CAD Presentation</td>
             <td>NSTEMI</td>
         </tr>
         <tr>
             <td class="LeftColumn">Cardiac Arrest </td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">Cardiogenic Shock w/in 24 Hours</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">Cardiogenic shock at start of PCI</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">CCS Class</td>
             <td>Asymptomatic</td>
         </tr>
         <tr>
             <td class="LeftColumn">Composite NYHA and CCS Class - 1 question combined</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">Currently on dialysis</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">Heart Failure: Current Status</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">STEMI onset less than 12 hours</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">Mortality Pathway Message from eLUMEN</td>
             <td>Some patient string data</td>
         </tr>
         <tr>
             <td class="LeftColumn">PCI Priority (4 Categories)</td>
             <td>Emergent</td>
         </tr>
         <tr>
             <td class="LeftColumn">Severe angina (&#8805; 2 episodes w/in 24 hrs)</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">Smoking Status</td>
             <td>Current</td>
         </tr>
         <tr>
             <td class="LeftColumn">Fibrinolytic treatment successful for STEMI</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">History of Diabetes - Boolean</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">Diabetes Therapy</td>
             <td>None</td>
         </tr>
         <tr>
             <td class="LeftColumn">Family History of CAD</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">History of Lung Disease</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">History of Renal Failure</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">History of Hypertension</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">History of PAD</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">History of Prior PCI With Timeframe</td>
             <td>&#8805; 12 months</td>
         </tr>
         <tr>
             <td class="LeftColumn">History of Cerebrovascular Disease</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">History of Prior CABG</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">History of Prior MI</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">Aspirin Use in Last 7 Days</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">Beta Blockers</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">Calcium Channel Blockers</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">Nitrates</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">Other Anti Ischemic Drug Therapy</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">Ranexa</td>
             <td>False</td>
         </tr>
         <tr>
             <td class="LeftColumn">Physician Name</td>
             <td>Konstantinos Boudoul</td>
         </tr>
         <tr>
             <td class="LeftColumn">AUC Notes from eLUMEN</td>
             <td>Some patient string data</td>
         </tr>
         <tr>
             <td class="LeftColumn">AUC Anatomy from eLumen</td>
             <td>Some patient string data</td>
         </tr>
     </tbody>
</table>
</span>&nbsp; </div>
                        </div>
                    </div>
                </div>
                <br />
                <!-- show all input values ePRISM widget end -->
            </section>
        </div>
    </div>
    <!-- end of right side -->
    <!-- end of eLUMEN display -->
</div>
<!-- below are the modal dialogs -->
<!-- begin modal page 0 algorithm only for >75 yr olds -->
<div tabindex="-1" class="modal fade" id="algorithmPage0">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" type="button" hidden="hidden" data-dismiss="modal">x</button>
                <h4 class="modal-title">OSU PCI Algorithm - <b> Patient &#8805; 75 years old </b></h4> </div>
            <div class="modal-body">
                <div id="OSUAlgorithmPage0">
                    <div style="height: 40px;">&nbsp;</div>
                    <div align="center">
                        <div class="eLumenBody"> Out of hospital unwitnessed arrest?
                            <div style="height: 20px;">&nbsp;</div>
                            <button class="btn btn-default btn-lg active dialogbuttonselected" id="OSUAlgorithm75UnwitnessedNO" type="button">No</button> &nbsp;&nbsp;&nbsp;&nbsp;
                            <button class="btn btn-default btn-lg active dialogbuttonselected" id="OSUAlgorithm75UnwitnessedYES" type="button">Yes</button>
                            <div style="height: 40px;">&nbsp;</div>
                            <div class="hidden btn-danger" id="FutilityMessage" style="text-align: center; font-size: x-large;">Consider futility and do not proceed</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-default hidden" id="CloseButtonModal0" type="button" data-dismiss="modal">Exit</button>
                <button class="btn btn-success hidden" id="NextButtonModal0" type="button">Next <span class="glyphicon glyphicon-chevron-right"></span>
                </button>
            </div>
        </div>
    </div>
</div>
<!-- end model page 0 algorithm only for STEMI and age of 75 -->
<!-- begin modal page 1 algorithm -->
<div tabindex="-1" class="modal fade" id="algorithmPage1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" type="button" hidden="hidden" data-dismiss="modal">x</button>
                <h4 class="modal-title"><span style="font-weight: bold;">OSU PCI Algorithm</span></h4> </div>
            <div class="modal-body">
                <table class="table table-responsive table-hover" id="OSUAlgorithmTablePage1">
                    <thead>
                        <tr>
                            <th><span style="font-size: larger; font-weight: bold;">Select all that apply </span>
                            </th>
                            <th></th>
                            <th style="text-align: center;"> Select Check Box
                                <br /> To Indicate Yes </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="OSUAlgorithmQuestionRow">
                            <td class="OSUAlgorithmLabel">ePRISM Mortality &gt; 10% <span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;(Calculated Risk = <span id="WizardMortalityRisk"></span>)</span>
                            </td>
                            <td> &nbsp;&nbsp;</td>
                            <td>
                                <input class="form-control OSUAlgorithmCountYes" id="OSUAlgoMortalityGT10" type="checkbox" /> </td>
                        </tr>
                        <tr class="OSUAlgorithmQuestionRow">
                            <td class="OSUAlgorithmLabel">Triple vessel disease &gt; 50%</td>
                            <td> &nbsp;&nbsp;</td>
                            <td>
                                <input class="form-control OSUAlgorithmCountYes" id="OSUAlgoTripleVesselGT50" type="checkbox" /> </td>
                        </tr>
                        <tr class="OSUAlgorithmQuestionRow">
                            <td class="OSUAlgorithmLabel">Diabetic with &#8805; 2 vessel disease with pLAD</td>
                            <td> &nbsp;&nbsp;</td>
                            <td>
                                <input class="form-control OSUAlgorithmCountYes" id="OSUAlgoMortalityDiabetic2vzlD" type="checkbox" /> </td>
                        </tr>
                        <tr class="OSUAlgorithmQuestionRow">
                            <td class="OSUAlgorithmLabel">"Last remaining vessel" with EF &#8804; 35%</td>
                            <td> &nbsp;&nbsp;</td>
                            <td>
                                <input class="form-control OSUAlgorithmCountYes" id="OSUAlgoMortalityLastRemainVzlEF35" type="checkbox" /> </td>
                        </tr>
                        <tr class="OSUAlgorithmQuestionRow">
                            <td class="OSUAlgorithmLabel">Supported PCI (IABP/Impella)</td>
                            <td> &nbsp;&nbsp;</td>
                            <td>
                                <input class="form-control OSUAlgorithmCountYes" id="OSUAlgoMortalitySupportedPCI" type="checkbox" /> </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button class="btn btn-default hidden" type="button"> <span class="glyphicon glyphicon-chevron-left"></span> Back</button>
                <button class="btn btn-success" id="NextButtonModal1" type="button">Next <span class="glyphicon glyphicon-chevron-right"></span>
                </button>
            </div>
        </div>
    </div>
</div>
<!-- end model page 1 algorithm -->
<!-- begin modal page 2 algorithm -->
<div tabindex="-1" class="modal fade" id="algorithmPage2">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" type="button" hidden="true" data-dismiss="modal">x</button>
                <h4 class="modal-title" style="text-align: center;">
<span style="font-weight: bold;">
OSU PCI Algorithm
</span><br />
PCI Priority =
<span id="PCIPriorityOSUAlgorithm"></span>
&nbsp;&nbsp;&nbsp;
CAD Presentation = <span id="CADPresShowOSUAlgorithm"></span>
</h4> </div>
            <div class="modal-body">
                <div class="eLumenBody" id="OSUAlgorithmPage2">
                    <div class="hidden"> Number of yes responses - <span id="AlgorithmCheckCount"></span> </div>
                    <!-- going to show button to select stable or unstable for urgent or emergent cases -->
                    <div class="hidden" id="StableOrUnstableSelect" style="text-align: center;">
                        <div style="height: 10px;">&nbsp;</div> Select applicable presentation
                        <div style="height: 10px;">&nbsp;</div>
                        <button class="btn btn-default btn-lg active stableunstableselected" id="StableDialogButton" type="button"> <span style="font-size: large; font-weight: bold;">Stable</span>
                            <br /> CP Free
                            <br /> VS stable
                            <br /> Can lie flat
                            <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </button> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <button class="btn btn-default btn-lg active stableunstableselected" id="UnstableDialogButton" type="button"> <span style="font-size: large; font-weight: bold;">Unstable</span>
                            <br /> Ongoing CP
                            <br /> Shock (SBP &lt;90/pressors)
                            <br /> Advanced HF
                            <br /> Arrythmias </button>
                    </div>
                    <div style="height: 25px;">&nbsp;</div>
                    <div style="text-align: center;">
                        <!-- show this one when algorithmcount = 0 - no yes responses on previous page -->
                        <div class="hidden btn btn-success disabled" id="ProceedWithPCI" style="text-align: center; font-size: x-large; font-weight: bold;"> Proceed with PCI </div>
                        <!-- will show this if elective or stable urgent/emergent , >1 yes on previous page -->
                        <div class="hidden btn btn-danger disabled" id="StableDialogButton_Message" style="text-align: center; font-size: x-large; font-weight: bold;">Heart Team Consult
                            <br /> Calculate Syntax</div>
                        <!-- will show this one if unstable and >1 yes on previous page -->
                        <div class="hidden btn btn-warning disabled" id="UnstableDialogButton_Message" style="text-align: center; font-size: x-large; font-weight: bold;">Consider Heart Team Consult</div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default hidden" id="CloseButtonModal3" type="button" data-dismiss="modal">Proceed with PCI</button>
                    <button class="btn btn-default hidden" id="CloseButtonModal2" type="button" data-dismiss="modal">Close</button>
                    <button class="btn btn-success hidden" id="NextButtonModal2" type="button">Next <span class="glyphicon glyphicon-chevron-right"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- end model page 2 algorithm -->
<!-- modal to indicate saving -->
<div class="modal fade" id="savingDialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <h3 id="SaveDialogBody"> Saving eLUMEN values... </h3>
                <h4 id="SavingValueMessage"></h4> </div>
        </div>
    </div>
</div>
<!-- modal to confirm navigate away while dirty -->
<div tabindex="-1" class="modal fade" id="aucDirtyConfirm">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header"> </div>
            <div class="modal-body">
                <p> eLUMEN changes not saved.
                    <br /> Select Cancel to return to save or OK to exit without saving. </p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-small">Cancel</button>&nbsp;&nbsp;
                <button class="btn btn-small">OK</button>
            </div>
        </div>
    </div>
</div>
<script>
//<![CDATA[
// global default decimal places - numbers will be shown to this value by default - override at local .toDecimalPlaces call
var pageDirty = false;
var DefaultDecimalPlaces = 2;
var Gender = ePRISMDocumentContext.CollectionSetInfo["Gender"].ParameterResponses[ePRISMDocumentContext.CollectionSetInfo["Gender"].ParameterValue].FullText;
var PCIPriority = ePRISMDocumentContext.CollectionSetInfo["PCIPriority"].ParameterResponses[ePRISMDocumentContext.CollectionSetInfo["PCIPriority"].ParameterValue].FullText;
var AlgorithmCount = 0;
var Race = ePRISMDocumentContext.CollectionSetInfo["Race_7_Groups"].ParameterValue;
// assumption 2 = Black/African American -- used in the GFR from lab population
var labIndent = '&nbsp;&nbsp;&nbsp;';
// once DOM is ready - this script starts
$(document).ready(function () {
    // populate modal with pci priority
    $('#PCIPriorityOSUAlgorithm').text(ePRISMDocumentContext.CollectionSetInfo["PCIPriority"].ParameterResponses[ePRISMDocumentContext.CollectionSetInfo["PCIPriority"].ParameterValue].FullText);
    // change title of page for tab recognition
    document.title = 'eLUMEN - ' + ePRISMDocumentContext.PatientIdentifier.LastName + ', ' + ePRISMDocumentContext.PatientIdentifier.FirstName + ' ' + ePRISMDocumentContext.PatientIdentifier.MiddleInitial;
    // load demographics
    loadDemographics();
    //Launch Modal for Calculate Algorithm
    ProceedPCIOnLoad();
    // load lab values arg list = id of table to load, arrary of lab value names to load
    //loadLabValues('LabValues' - table ID to load into ,
    // list of of labs - ['SerumCreatinine', 'Hgb', 'GFR_CKD_EPI']
    // - third argument is an arry of labels to use
    loadLabValues('LabValues', ['GFR', 'CrClearanceCockroftGault', 'CrClearanceCGTimes3', 'ContrastTimeOutCalculated'], ['GFR', 'Creatinine Clearance', 'Contrast Volume Threshold (CrClx3)', 'Contrast Timeout']);
    // 04 07 2015 - removed lab values from this list
    // ['SerumCreatinine', 'Hb', 'GFR', 'CrClearanceCockroftGault', 'CrClearanceCGTimes3'],
    // ['Serum Creatinine', 'Hgb', 'GFR', 'Creatinine Clearance', 'Contrast Volume Threshold (CrClx3)']);
    // does the GFR need to be adjusted?
    // some clients send in GFR from a lab feed - check the loadGFR function to see if picking up from lab
    loadGFR('GFR');
    // Bleeding risk - populate and format
    loadBleedingRisk('NCDR_InHospPCIBleedingRiskPhy');
    // Mortality risk - populate and format
    loadMortalityRisk('Inhosp_precath_mortality_phys');
    // ----------------------
    // TVR risks - populate and format
    loadTVR();
    createTVRRiskChart();
    // ----------------------
    // AUC
    loadAUC();
    // AKI chart build
    //createAKIRiskChart();
    // click function for AUC rows - when row is clicked - put check mark - when clicked again remove
    // when the row is clicked - updating ePRISMDocumentContext.CollectionSetInfo["AUCAnatomyFromeLumen"].ParameterValue for saving
    $(".clickablerow").click(function () {
        var saveHidden = $(this).find('.hiddenSave').hasClass('invisible');
        // above would be false if the row is already selected
        $('.hiddenSave').addClass('invisible');
        if(saveHidden) {
            //remove class invisible
            $(this).find('.hiddenSave').removeClass('invisible');
            // enable the save button
            ePRISMDocumentContext.CollectionSetInfo["AUCAnatomyFromeLumen"].ParameterValue = $(this).find('.anatomy').text() + ' - ' + $(this).find('.rating').text();
            updateDirty(true);
        } else {
            // add class invisible - we are toggling from one that was already selected
            $(this).find('.hiddenSave').addClass('invisible');
            ePRISMDocumentContext.CollectionSetInfo["AUCAnatomyFromeLumen"].ParameterValue = "";
        }
    });
    $("#TVRDetailToggle").click(function () {
        $('#TVRDetailedTable').toggleClass('hidden');
    });
    // binding all items with class of eLumenValueCapture to this change event - will set dirty to true
    // this binding will update the parameter that matches the id of the item with a class of eLumenValueCapture
    // note AUC updates are handled separately ... all other updatable items on the page will have a class of eLumenValueCapture
    $(".eLumenValueCapture").change(function (e) {
        // set dirty flag to enable save button if it isn't already enabled
        updateDirty(true);
        // update the write back value for this row
        // example below from the AUC - follow same pattern to pull the elements
        //ePRISMDocumentContext.CollectionSetInfo["AUCAnatomyFromeLumen"].ParameterValue = $(this).find('.anatomy').text() + ' - ' + $(this).find('.rating').text();
        selectedItem = e.target.id;
        // next two lines are useful for debugging - uncomment to get update activity out to console log
        updateString = selectedItem + " will be updated with " + $('#' + selectedItem).val();
        console.log(updateString);
        ePRISMDocumentContext.CollectionSetInfo.HasValueChanged = true;
        ePRISMDocumentContext.CollectionSetInfo[selectedItem].HasValueChanged = true;
        ePRISMDocumentContext.CollectionSetInfo[selectedItem].ParameterValue = $('#' + selectedItem).val();
    });
    // additional script of OSU pathway below
    // set up event handler for buttons with class = "dialogbuttonselected"
    $(".dialogbuttonselected").click(function (e) {
        // change the color of the selected button
        updateDirty(true);
        clickedbuttonID = e.target.id;
        $(".dialogbuttonselected").each(function () {
            if(clickedbuttonID == this.id) {
                toggleDialogButton(this.id, true);
            } else {
                toggleDialogButton(this.id, false);
            }
        })
        if(clickedbuttonID == "OSUAlgorithm75UnwitnessedYES") {
            // show the message below
            $("#FutilityMessage").removeClass('hidden');
            $("#NextButtonModal0").addClass('hidden');
            $("#CloseButtonModal0").removeClass('hidden');
        } else {
            $("#FutilityMessage").addClass('hidden');
            $("#NextButtonModal0").removeClass('hidden');
            $("#CloseButtonModal0").addClass('hidden');
        }
    });
    $(".OSUAlgorithmCountYes").click(function (e) {
        // increment or decrement count based on status of check box
        $('#' + e.target.id).prop("checked") ? AlgorithmCount++ : AlgorithmCount--;
    });
    $("#CloseButtonModal0").click(function (e) {
        // exiting first dialog -
        // update the mortality section with futility message
        UpdateMortalityMessage('FutilityMessage');
    });
    $("#NextButtonModal0").click(function (e) {
        $('#algorithmPage0').modal('hide');
        // show proceed
        $('#ProceedWithPCI').removeClass('hidden');
        $('#CloseButtonModal2').removeClass('hidden');
        $('#CloseButtonModal3').removeClass('hidden');
        UpdateMortalityMessage('ProceedWithPCI');
        $('#algorithmPage2').modal('show');
    });
    $("#NextButtonModal1").click(function (e) {
        // hide - close modal 0
        // show modal 1
        $('#algorithmPage1').modal('hide');
        // update the count of positive responses
        $('#AlgorithmCheckCount').text(AlgorithmCount);
        if(AlgorithmCount == 0) {
            // unhide the proceed with PCI on
            $('#ProceedWithPCI').removeClass('hidden');
            UpdateMortalityMessage('ProceedWithPCI');
            $('#CloseButtonModal2').removeClass('hidden');
            $('#CloseButtonModal3').removeClass('hidden');
        } else {
            $('#ProceedWithPCI').addClass('hidden');
            // we know at least 1 yes - so check stable/unstable - unhide the
            if(ePRISMDocumentContext.CollectionSetInfo["PCIPriority"].ParameterValue > 1) {
                $('#StableOrUnstableSelect').removeClass('hidden');
            } else {
                // Elective - have > 1 - show stop sign
                $("#StableDialogButton_Message").removeClass('hidden');
                UpdateMortalityMessage('#StableDialogButton_Message');
                $('#' + 'CloseButtonModal2').removeClass('hidden');
                $('#' + 'CloseButtonModal3').removeClass('hidden');
            }
        }
        $('#algorithmPage2').modal('show');
    });
    // stableunstableselected class clicked
    $(".stableunstableselected").click(function (e) {
        updateDirty(true);
        clickedbuttonID = e.target.id;
        $(".stableunstableselected").each(function () {
                messageDiv = '#' + this.id + '_Message';
                if(clickedbuttonID == this.id) {
                    toggleDialogButton(this.id, true);
                    $(messageDiv).removeClass('hidden');
                    UpdateMortalityMessage(messageDiv);
                } else {
                    toggleDialogButton(this.id, false);
                    $(messageDiv).addClass('hidden');
                }
            })
            // unhide the close button on the dialog
        $('#' + 'CloseButtonModal2').removeClass('hidden');
        $('#' + 'CloseButtonModal3').removeClass('hidden');
    });
    // save eLUMEN values
    $("#eLUMENSave").click(function () {
        // bring up the saving dialog
        // tells the browser side logic to fire a callback to refresh
        $("#savingDialog").modal('show');
        ePRISMDocumentContext.CollectionSetInfo.HasValueChanged = true;
        ePRISMDocumentContext.CollectionSetInfo["AUCAnatomyFromeLumen"].HasValueChanged = true;
        // mark the page as not dirty and disable the save button
        updateDirty(false);
        // notifyServerWhenValueChanges Boolean Performs callback to server.
        // recalcDependentParameters Boolean cause dependent, composite, and model values to regenerate.
        var notifyServerWhenValueChanges = true;
        var recalcDependentParameters = true;
        // the call back function - the third argument - will set the aucDirty flag to false once save is complete
        OnValueChange(notifyServerWhenValueChanges, recalcDependentParameters, "SaveComplete");
    });
    // set up event for unload - check to see if dirty
    $(window).bind("beforeunload", function () {
        if(pageDirty) {
            event.stopPropagation();
            event.returnValue = "eLumen values have not been saved. \n\nIf you leave the page without returning to save, the updated values will not be saved.";
            return event.returnValue;
        }
    });
    $("#ProceedPCI").click(function () {
        // set all messages to hidden - the processing of the dialogs will unhide as appropriate
        $('#ProceedWithPCI').addClass('hidden');
        $('#StableDialogButton_Message').addClass('hidden');
        $('#UnstableDialogButton_Message').addClass('hidden');
        $('#StableOrUnstableSelect').addClass('hidden');
        $('#FutilityMessage').addClass('hidden');
        $('#CloseButtonModal2').addClass('hidden');
        $('#CloseButtonModal3').addClass('hidden');
        $('#OSUAlgorithm75UnwitnessedNO').removeClass('btn-danger');
        $('OSUAlgorithm75UnwitnessedYES').removeClass('btn-danger');
        // show modal page - start the algorithm process
        // get CAD Presentation to check for STEMI value of 6
        var CADPresNumeric = 0;
        try {
            CADPresNumeric = parseInt(ePRISMDocumentContext.CollectionSetInfo["CADPresentation"].ParameterValue);
            $('#CADPresShowOSUAlgorithm').text(ePRISMDocumentContext.CollectionSetInfo["CADPresentation"].ParameterResponses[CADPresNumeric].FullText);
        } catch(e) {
            CADPresNumeric = 0;
        }
        if(CADPresNumeric === 6) {
            if(ePRISMDocumentContext.CollectionSetInfo["AgeAutoCalc"].ParameterValue >= 75) {
                $('#algorithmPage0').modal('show');
            } else {
                // show proceed to PCI dialog and update the page
                $('#ProceedWithPCI').removeClass('hidden');
                $('#CloseButtonModal2').removeClass('hidden');
                $('#CloseButtonModal3').removeClass('hidden');
                $('#algorithmPage2').modal('show');
                UpdateMortalityMessage('ProceedWithPCI');
            }
        } else {
            // not a STEMI
            $('#algorithmPage1').modal('show');
        }
    });
});

function ProceedPCIOnLoad() {
    // set all messages to hidden - the processing of the dialogs will unhide as appropriate
    $('#ProceedWithPCI').addClass('hidden');
    $('#StableDialogButton_Message').addClass('hidden');
    $('#UnstableDialogButton_Message').addClass('hidden');
    $('#StableOrUnstableSelect').addClass('hidden');
    $('#FutilityMessage').addClass('hidden');
    $('#CloseButtonModal2').addClass('hidden');
    $('#CloseButtonModal3').addClass('hidden');
    $('#OSUAlgorithm75UnwitnessedNO').removeClass('btn-danger');
    $('OSUAlgorithm75UnwitnessedYES').removeClass('btn-danger');
    // show modal page - start the algorithm process
    // get CAD Presentation to check for STEMI value of 6
    var CADPresNumeric = 0;
    try {
        CADPresNumeric = parseInt(ePRISMDocumentContext.CollectionSetInfo["CADPresentation"].ParameterValue);
        $('#CADPresShowOSUAlgorithm').text(ePRISMDocumentContext.CollectionSetInfo["CADPresentation"].ParameterResponses[CADPresNumeric].FullText);
    } catch(e) {
        CADPresNumeric = 0;
    }
    if(CADPresNumeric === 6) {
        if(ePRISMDocumentContext.CollectionSetInfo["AgeAutoCalc"].ParameterValue >= 75) {
            $('#algorithmPage0').modal('show');
        } else {
            // show proceed to PCI dialog and update the page
            $('#ProceedWithPCI').removeClass('hidden');
            $('#CloseButtonModal2').removeClass('hidden');
            $('#CloseButtonModal3').removeClass('hidden');
            $('#algorithmPage2').modal('show');
            UpdateMortalityMessage('ProceedWithPCI');
        }
    } else {
        // not a STEMI
        $('#algorithmPage1').modal('show');
    }
}

function UpdateMortalityMessage(DivToGetMessageFrom) {
    $("#MortalityPathwayMessageDiv").removeClass('hidden');
    if(!(DivToGetMessageFrom.substring(0, 1) == '#')) {
        DivToGetMessageFrom = '#' + DivToGetMessageFrom;
    }
    $("#MortalityPathwayMessage").html($(DivToGetMessageFrom).html());
    updateMortality("MortalityPathwayMessage");
}

function updateMortality(elementID) {
    // set dirty flag to enable save button if it isn't already enabled
    updateDirty(true);
    // update the write back value for this row
    // example below from the AUC - follow same pattern to pull the elements
    //ePRISMDocumentContext.CollectionSetInfo["AUCAnatomyFromeLumen"].ParameterValue = $(this).find('.anatomy').text() + ' - ' + $(this).find('.rating').text();
    selectedItem = elementID;
    var selectedItemElement = $('#' + selectedItem);
    //Hackathon since editor replaces when I search for the BR tag without a slash, ultimately trying to write back value without carriage returns or br tag
    var br = "\x3Cbr\x3E";
    var trim = selectedItemElement.html().replace("\r\n", "").replace("\n", "").replace("\r", "").replace(br, " ");
    // next two lines are useful for debugging - uncomment to get update activity out to console log
    updateString = selectedItem + " will be updated with " + trim;
    console.log(updateString);
    ePRISMDocumentContext.CollectionSetInfo.HasValueChanged = true;
    ePRISMDocumentContext.CollectionSetInfo[selectedItem].HasValueChanged = true;
    ePRISMDocumentContext.CollectionSetInfo[selectedItem].ParameterValue = trim;
}

function enableSaveButton(toggleValue) {
    if(toggleValue) {
        // true - enabling
        $("#eLUMENSave").removeClass('disabled btn-default');
        $("#eLUMENSave").addClass('btn-HOS');
    } else {
        // false - disabling - turn gray and disable
        $("#eLUMENSave").addClass('btn-default disabled');
        $("#eLUMENSave").removeClass('btn-HOS');
    }
}

function updateDirty(flagValue) {
    // set global flag for page to save - inbound flagValue is boolean
    enableSaveButton(flagValue);
    pageDirty = flagValue;
}

function loadDemographics() {
    loadIDwithValue('First', ePRISMDocumentContext.PatientIdentifier.FirstName);
    loadIDwithValue('Last', ePRISMDocumentContext.PatientIdentifier.LastName);
    loadIDwithValue('MI', ePRISMDocumentContext.PatientIdentifier.MiddleInitial);
    loadIDwithValue('DOB', ePRISMDocumentContext.PatientIdentifier.DateOfBirth);
    loadIDwithValue('Age', truncateZero(ePRISMDocumentContext.CollectionSetInfo["AgeAutoCalc"].ParameterValue));
    loadIDwithValue('Gender', Gender);
    loadIDwithValue('MRN', ePRISMDocumentContext.PatientIdentifier.MedicalRecordNumber);
}

function loadLabValues(TableID, LabArrary, LabelArray) {
    // will add lab values to the table specified in TableID
    for(i = 0; i < LabArrary.length; ++i) {
        addLabRow($('#' + TableID), LabArrary[i], LabelArray[i]);
    }
}

function loadBleedingRisk(ModelToPullFrom) {
    var BleedingRisk = ePRISMDocumentContext.CollectionSetInfo[ModelToPullFrom].ModelingResults.Prediction;
    // check validity of bleeding risk value
    if(isNaN(BleedingRisk)) {
        // not a valid bleeding risk - exit the function --- do we need to try patient model?
        $('#BleedingRisk').html("Bleeding model results not located");
        return(0); // EXITING FUNCTION!!!!
    } else {
        //treat number
        BleedingRisk = BleedingRisk * 100;
        BleedingRisk = parseFloat(BleedingRisk).toFixed(DefaultDecimalPlaces);
    }
    var BleedingRiskClass = ePRISMDocumentContext.CollectionSetInfo[ModelToPullFrom].ModelingResults.AnnotationFullTextLabel;
    // set color based on style - driving from annotation full text
    $('#BleedingRisk').addClass(BleedingRiskClass);
    $('#BleedingRiskClass').addClass(BleedingRiskClass);
    // set values
    $('#BleedingRisk').html(BleedingRisk + '%');
    $('#BleedingRiskClass').html(BleedingRiskClass);
    $('#BleedingModelDateTime').html(formatDateTime(ePRISMDocumentContext.CollectionSetInfo[ModelToPullFrom].TimeStamp));
}

function loadMortalityRisk(ModelToPullFrom) {
        var MortalityRisk = ePRISMDocumentContext.CollectionSetInfo[ModelToPullFrom].ModelingResults.Prediction;
        // check validity of bleeding risk value
        if(isNaN(MortalityRisk)) {
            // not a valid bleeding risk - exit the function --- do we need to try patient model?
            $('#MortalityRisk').html("Bleeding model results not located");
            return(0); // EXITING FUNCTION!!!!
        } else {
            //treat number
            MortalityRisk = MortalityRisk * 100;
            MortalityRisk = parseFloat(MortalityRisk).toFixed(DefaultDecimalPlaces);
        }
        var MortalityRiskClass = ePRISMDocumentContext.CollectionSetInfo[ModelToPullFrom].ModelingResults.AnnotationFullTextLabel;
        // set values
        $('#MortalityRisk').html(MortalityRisk + '%');
        $('#WizardMortalityRisk').html(MortalityRisk + '%');
        if(MortalityRisk > 10) {
            // set OSUAlgoMortalityGT10 to checked and disabled?
            $('#OSUAlgoMortalityGT10').prop("checked", true);
            AlgorithmCount++;
        }
        $('#MortalityModelDateTime').html(formatDateTime(ePRISMDocumentContext.CollectionSetInfo[ModelToPullFrom].TimeStamp));
    }
    // GFR load - see if we can pull from lab values
function loadGFR() {
    // update the id's GFR_value, GFR_datetime - pulling the value from the lab values that came in
    // OSU sends in AA or NonAA GFR values in the lab feed - if updated from the lab - the label from lab will be appended otherwise from ePRISM will be appended
    try {
        if(ePRISMDocumentContext.CollectionSetInfo["Race_7_Groups"].ParameterValue == '2') {
            // assumption - race of 2 = african american
            eGFR = ePRISMDocumentContext.CollectionSetInfo["GFRAAFromLab"].ParameterValue;
            GFRTimestamp = ePRISMDocumentContext.CollectionSetInfo["GFRAAFromLab"].TimeStamp;
        } else {
            // not african american
            eGFR = ePRISMDocumentContext.CollectionSetInfo["GFRNonAAFromLab"].ParameterValue;
            GFRTimestamp = ePRISMDocumentContext.CollectionSetInfo["GFRNonAAFromLab"].TimeStamp;
        }
    } catch(e) {
        // loading from labs failed - they are not attached to ePRISM
        eGFR = "Failed to load from lab";
    }
    // format the value
    eGFR = parseFloat(eGFR).toFixed(DefaultDecimalPlaces);
    var appendGFRLabel;
    //populate GFR from above branching and append to lab value label indicating the source
    if(!(isNaN(eGFR))) {
        $('#GFR_value').html(labIndent + eGFR + '&nbsp;');
        $('#GFR_datetime').html(formatDateTime(GFRTimestamp));
        appendGFRLabel = ' <span style= "font-size: small">&nbsp;(from lab feed)</span>';
    } else {
        appendGFRLabel = '<span style= "font-size: small">&nbsp;(from ePRISM calc)</span>';
    }
    // assumption - GFR_name is the id of of the div showing the GFR lab value
    $('#GFR_name').append(appendGFRLabel);
}

function loadTVR() {
        // for each in TVR Risks
        // multiple items have class of TVRRisks assigned - step through those items and plug in the risk # for each of the matching id's
        var TVRTimestamp = '';
        $('.TVRRisks').each(function () {
                //just load the timestamp over for each of the 4 items - down below - will put it in a div
                TVRTimestamp = ePRISMDocumentContext.CollectionSetInfo[this.id].TimeStamp;
                // assign BMS %
                var TVRRisk = ePRISMDocumentContext.CollectionSetInfo[this.id].ModelingResults.Prediction * 100;
                TVRRisk = (parseFloat(TVRRisk).toFixed(DefaultDecimalPlaces)) + '%';
                currID = "#" + this.id;
                $(currID).html(TVRRisk);
                // color the risk based on the risk classification - there are styles of Low, Medium, High... in style.css
                RiskClass = ePRISMDocumentContext.CollectionSetInfo[this.id].ModelingResults.AnnotationFullTextLabel;
                $(currID).addClass(RiskClass);
            })
            // update the date / time of the model - will use the timestamp from the last model to put in the header
        $('#TVRDateTime').html(formatDateTime(TVRTimestamp));
    }
    // load AUC
function loadAUC() {
        // div are set to not visible by default - cycle through AUC models, if data there - make div visible and populate results
        var CADPresenationNumeric = 0;
        try {
            CADPresenationNumeric = parseInt(ePRISMDocumentContext.CollectionSetInfo["CADPresentation"].ParameterValue);
        } catch(e) {
            CADPresenationNumeric = 0;
        }
        // last parm in identifies the div - the sub sections/divs are all standard and foll divNameResults, divNameTable
        // Stable Angina or Asymptomatic
        var CADPresMatch = false;
        var anatomyLabels = ['1 or 2 vessel disease, no pLAD', '1 or 2 vessel disease, stenosis < 70%, FFR < .80', '1 vessel disease, pLAD', '2 vessel disease, pLAD', '3 vessel disease, no LM', 'CTO 1 vessel, no other disease', '>=1 stenosis in SVG', '>=1 native vessel disease, all grafts patent'];
        var arrayItems = ['AUCSAAsymptCol1', 'AUCSAAsympt1or2VDStenLT70', 'AUCSAAsymptCol3', 'AUCSAAsymptCol4', 'AUCSAAsymptCol5', 'AUCSAAsymptCol2', 'AUCSAAsymptCol6', 'AUCSAAsymptCol7'];
        // cad presentation of Stable Angina, Asymptomatic 1,2,3
        if(CADPresenationNumeric === 1 || CADPresenationNumeric === 2 || CADPresenationNumeric === 3) {
            CADPresMatch = true;
        }
        loadAUCDetails(anatomyLabels, arrayItems, 'AUCSAAsymp', CADPresMatch);
        // check count and - check if CAD presentation has a value
        // Unstable Angina or Non-STEMI
        CADPresMatch = false;
        anatomyLabels = ['1 or 2 vessel disease, no pLAD', '1 vessel disease, pLAD', '2 vessel disease, pLAD', '3 vessel disease, no LM', 'CTO 1 vessel, no other disease', '>=1 stenosis in SVG', '>=1 native vessel disease, all grafts patent'];
        arrayItems = ['AUCUANSTEMICol1', 'AUCUANSTEMICol3', 'AUCUANSTEMICol4', 'AUCUANSTEMICol5', 'AUCUANSTEMICol2', 'AUCUANSTEMICol6', 'AUCUANSTEMICol7'];
        // cad presentations Unstable Angina or Non STEMI 4 or 5
        if(CADPresenationNumeric === 4 || CADPresenationNumeric === 5) {
            CADPresMatch = true;
        }
        loadAUCDetails(anatomyLabels, arrayItems, 'AUCUANonSTEMI', CADPresMatch);
        // STEMI
        CADPresMatch = false;
        anatomyLabels = ['STEMI'];
        arrayItems = ['AUCSTEMI'];
        // cad presentation of STEMI 6
        if(CADPresenationNumeric === 6) {
            CADPresMatch = true;
        }
        loadAUCDetails(anatomyLabels, arrayItems, 'AUCSTEMI', CADPresMatch);
    }
    // load details section of AUC divs
function loadAUCDetails(anotomyLabels, arrayModelNames, topDivName, CADPresMatch) {
    // assumptions about div names - from topDivName - the sub divs are assumed to be topDivName+Results, topDivName+Table
    var divDateTime = topDivName + 'DateTime';
    var resultsTable = topDivName + 'Table';
    // loop through arrayModelNames - see if value >0 is present - if so - add to table of results
    iArrLen = arrayModelNames.length;
    var foundResults = 0;
    var prediction = 0;
    var anatomyLabel = '';
    var color = '';
    AUCDateTimeRun = '';
    for(i = 0; i < iArrLen; i++) {
        prediction = ePRISMDocumentContext.CollectionSetInfo[arrayModelNames[i]].ModelingResults.Prediction;
        AUCDateTimeRun = ePRISMDocumentContext.CollectionSetInfo[arrayModelNames[i]].TimeStamp;
        if(prediction !== 0) {
            foundResults = foundResults + 1;
            switch(prediction) {
            case .25:
                result = 'Rarely Appropriate';
                color = 'High ';
                break;
            case .5:
                result = 'May Be Appropriate';
                color = 'Medium ';
                break;
            case .75:
                result = 'Appropriate';
                color = 'Low ';
            }
            // get anatomy from array
            anatomyLabel = anotomyLabels[i];
            // add to results table - argument list 1. the table to add to, 2. classes for the row, 3. text label / anatomy, 4. appropriateness rating
            color = color + ' clickablerow'
            addAUCRow($('#' + resultsTable), color, anatomyLabel, result);
        }
    }
    if(CADPresMatch) {
        $('#' + divDateTime).html(formatDateTime(AUCDateTimeRun));
        $('#' + topDivName).removeClass('hidden');
    }
    if(foundResults === 0) {
        addAUCRow($('#' + resultsTable), '', 'No correlating AUC results found for this patient', '');
    }
}

function createAKIRiskChart() {
    // update the date time for the model run - pick the 400 ml model as
    $('#AKIModelDateTime').html(formatDateTime(ePRISMDocumentContext.CollectionSetInfo["AKIriskat400mlcontrast"].TimeStamp));
    // setting the max value of the chart to 3% higher than the assumed largest risk 400mls
    var AKIMaxChartValue = (((ePRISMDocumentContext.CollectionSetInfo["AKIriskat400mlcontrast"].ModelingResults.Prediction) + .03) * 100);
    AKIMaxChartValue = AKIMaxChartValue.toFixed(0);
    // create the AKI chart
    $("#AKIRiskChart").kendoChart({
        legend: {
            visible: true,
            position: "bottom"
        },
        seriesDefaults: {
            type: "column"
        },
        series: [{
            labels: {
                visible: true,
                format: "{0}%",
                font: "14px sans-serif"
            },
            gap: .75,
            data: [
                treatChartNumber(ePRISMDocumentContext.CollectionSetInfo["AKIriskat100mlcontrast"].ModelingResults.Prediction),
                treatChartNumber(ePRISMDocumentContext.CollectionSetInfo["AKIriskat200mlcontrast"].ModelingResults.Prediction),
                treatChartNumber(ePRISMDocumentContext.CollectionSetInfo["AKIriskat300mlcontrast"].ModelingResults.Prediction),
                treatChartNumber(ePRISMDocumentContext.CollectionSetInfo["AKIriskat400mlcontrast"].ModelingResults.Prediction)
            ],
            color: "red"
        }],
        valueAxis: {
            title: {
                text: "% Risk"
            },
            labels: {
                color: "white"
            },
            min: 0,
            max: AKIMaxChartValue,
            line: {
                visible: true
            },
            minorGridLines: {
                visible: false
            },
        },
        categoryAxis: {
            labels: {
                font: "14px sans-serif"
            },
            categories: ['100 ml', '200 ml', '300 ml', '400 ml'],
            majorGridLines: {
                visible: true
            }
        }
    });
}

function createTVRRiskChart() {
    var TVRMaxChartValue = (((ePRISMDocumentContext.CollectionSetInfo["Rest_MDACBMSPh"].ModelingResults.Prediction) + .1) * 100);
    TVRMaxChartValue = TVRMaxChartValue.toFixed(0);
    // create the TVR chart
    $("#TVRRiskChart").kendoChart({
        legend: {
            visible: true,
            position: "left"
        },
        seriesDefaults: {
            type: "bar"
        },
        series: [{
            labels: {
                visible: true,
                format: "{0}%",
                font: "14px sans-serif"
            },
            gap: .75,
            data: [
                treatChartNumber(ePRISMDocumentContext.CollectionSetInfo["Rest_MDACBMSPh"].ModelingResults.Prediction),
                treatChartNumber(ePRISMDocumentContext.CollectionSetInfo["Rest_MDACDESPh"].ModelingResults.Prediction)
            ],
            color: "red"
        }],
        valueAxis: {
            title: {
                text: "% Risk"
            },
            labels: {
                color: "black"
            },
            min: 0,
            max: TVRMaxChartValue,
            line: {
                visible: true
            },
            minorGridLines: {
                visible: false
            },
        },
        categoryAxis: {
            labels: {
                font: "14px sans-serif"
            },
            categories: ['BMS', 'DES'],
            majorGridLines: {
                visible: true
            }
        }
    });
}

function SaveComplete(messages) {
        // callback function for updating parms from eLumen
        if(messages.length == 0) {
            // successfully saved
            // update modal and then dismiss
            updateDirty(false);
            $("#savingDialog").modal('hide');
        } else {
            $('#SaveCloseButton').removeClass('invisible');
            var htmlMessages = '<ul>';
            var i;
            for(i = 0; i < messages.length; i++) htmlMessages += '<li>' + messages[i] + '<li />';
            htmlMessages += '</ul>';
            $('#SaveDialogBody').html('Error saving. Please contact HOS Support. <br /> <b>Messages:</b><br />' + htmlMessages);
            updateDirty(true);
        }
    }
    // ****************************************************************************************************
    // helper functions below
    // ****************************************************************************************************
function treatChartNumber(inNumber) {
    try {
        return parseFloat((inNumber * 100)).toFixed(DefaultDecimalPlaces);
    } catch(e) {
        return 0;
    }
}

function loadIDwithValue(LoadID, LoadValue) {
        IDName = '#' + LoadID;
        $(IDName).html(LoadValue);
    }
    // truncates number to 0 decimal places
function truncateZero(n) {
    return Math[n > 0 ? "floor" : "ceil"](n);
}

function addLabRow(jQtable, labToAdd, labelToAdd) {
        jQtable.each(function () {
            try {
                var $table = $(this);
                // Number of td's in the last table row
                var n = $('tr:last td', this).length;
                var tds = '<tr class="LabResultsRow">';
                var labValueToAdd = parseFloat(ePRISMDocumentContext.CollectionSetInfo[labToAdd].ParameterValue).toFixed(DefaultDecimalPlaces);
                if(!(isNaN(labValueToAdd))) {
                    tds += '<td class="labcell"> <span id = "' + labToAdd + '_name" >' + labelToAdd + '&nbsp;</span>';
                    // rather than get the lab label using the process below - we are controlling the lable with the value
                    // tds += '<td id = "' + labToAdd + '_name" class="labcell">' + ePRISMDocumentContext.CollectionSetInfo[labToAdd].ParameterFullText + '&nbsp;';
                    // add value
                    tds += '<br /><div id = "' + labToAdd + '_value" class="labcell">' + labIndent + parseFloat(ePRISMDocumentContext.CollectionSetInfo[labToAdd].ParameterValue).toFixed(DefaultDecimalPlaces) + '&nbsp;</div></td>';
                    // add datetime
                    tds += '<td id = "' + labToAdd + '_datetime" align="right" class="labcell">' + formatDateTime(ePRISMDocumentContext.CollectionSetInfo[labToAdd].TimeStamp) + '&nbsp;</td>';
                    //finish up
                    tds += '</tr>';
                    if($('tbody', this).length > 0) {
                        $('tbody', this).append(tds);
                    } else {
                        $(this).append(tds);
                    }
                }
            } catch(err) {
                // skipping this lab value - error while processing
            }
        });
    }
    // function will add a row to a table - usage addTableRow($(#tableID);
function addAUCRow(jQtable, className, anatomy, rating) {
        var hiddenCheckbox = '<span class="hiddenSave invisible"><span class="glyphicon glyphicon-ok"></span></span>'
        jQtable.each(function () {
            var $table = $(this);
            // Number of td's in the last table row
            var n = $('tr:last td', this).length;
            var tds = '<tr class="' + className + ' AUCRow">';
            tds += '<td> <span class="AUCCheckbox">' + hiddenCheckbox + '</span></td>';
            tds += '<td class="anatomy">' + anatomy + '</td>';
            tds += '<td class="rating">' + rating + '</td>';
            tds += '</tr>';
            if($('tbody', this).length > 0) {
                $('tbody', this).append(tds);
            } else {
                $(this).append(tds);
            }
        });
    }
    // function will add a row to a table - usage addTableRow($(#tableID);
function addTableRow(jQtable) {
    jQtable.each(function () {
        var $table = $(this);
        // Number of td's in the last table row
        var n = $('tr:last td', this).length;
        var tds = '<tr>';
        for(var i = 0; i < n; i++) {
            tds += '<td>&nbsp;</td>';
        }
        tds += '</tr>';
        if($('tbody', this).length > 0) {
            $('tbody', this).append(tds);
        } else {
            $(this).append(tds);
        }
    });
}

function formatDateTime(timeIn) {
    var returnDateTime;
    if(timeIn.length > 0) {
        var timeSplit = timeIn.split(' ');
        var stdTime = timeSplit[1] + ' ' + timeSplit[2];
        var fullDate = timeSplit[0].split('/');
        var full
        returnDateTime = (fullDate[0] + '/' + fullDate[1] + '/' + fullDate[2].toString().substr(2, 2) + ' ' + standardToMilitaryTime(stdTime));
    } else {
        returnDateTime = '';
    }
    return(returnDateTime);
}

function standardToMilitaryTime(t) {
    var d = new Date("1/1/1900 " + t);
    return(d.getHours().toString().length === 1 ? "0" + d.getHours() : d.getHours()) + ":" + (d.getMinutes().toString().length === 1 ? "0" + d.getMinutes() : d.getMinutes())
}

function toggleDialogButton(buttonIDName, stateFlag) {
        // state flag - true - turn button to red, false turn button to gray
        if(stateFlag) {
            $('#' + buttonIDName).addClass("btn-danger");
            $('#' + buttonIDName).removeClass("btn-default");
        } else {
            $('#' + buttonIDName).removeClass("btn-danger");
            $('#' + buttonIDName).addClass("bt-default");
        }
    }
    //]]>
</script>